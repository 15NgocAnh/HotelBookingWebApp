@page
@model HotelBooking.Web.Pages.Account.LoginModel
@{
    ViewData["Title"] = "Login";
    Layout = "_LayoutBasic";
}
@section Styles {
    <link rel="stylesheet" href="~/css/login.css" asp-append-version="true" />
}

<div class="login-container">
    <div class="login-card">
        <div class="hotel-logo">
            <img src="/img/logo.png" alt="Hotel Logo" />
        </div>

        <h1 class="welcome-title">Chào mừng trở lại!</h1>
        <p class="welcome-subtitle">Đăng nhập để quản lý đặt phòng của bạn một cách dễ dàng.</p>

        <form method="post" id="loginForm">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="alert alert-danger d-none" id="errorMessage"></div>

            <div class="form-floating">
                <input type="email" class="form-control" id="email" name="email" placeholder="Nhập địa chỉ email của bạn" required>
                <label for="email">Địa chỉ Email</label>
            </div>

            <div class="form-floating">
                <input type="password" class="form-control" id="password" name="password" placeholder="Nhập mật khẩu của bạn" required>
                <label for="password">Mật khẩu</label>
            </div>

            <button type="submit" class="btn btn-login" id="loginBtn">
                Đăng nhập
            </button>
        </form>
    </div>
</div>

<script>
    // Enhanced form interactions
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('loginForm');
        const loginBtn = document.getElementById('loginBtn');
        const inputs = document.querySelectorAll('.form-control');

        // Add floating label effect
        inputs.forEach(input => {
            input.addEventListener('focus', function () {
                this.parentElement.classList.add('focused');
            });

            input.addEventListener('blur', function () {
                if (!this.value) {
                    this.parentElement.classList.remove('focused');
                }
            });

            // Check if input has value on page load
            if (input.value) {
                input.parentElement.classList.add('focused');
            }
        });

        // Form submission with loading animation
        form.addEventListener('submit', function (e) {
            // Prevent default submission for demonstration, remove in production if using standard form post
            // e.preventDefault();

            loginBtn.classList.add('loading');
            loginBtn.innerHTML = 'Đang đăng nhập...';

            // Simulate API call or backend processing
            // In a real application, remove this setTimeout and handle loading state
            // based on the actual async operation (e.g., fetch, axios)
            setTimeout(() => {
                loginBtn.classList.remove('loading');
                loginBtn.innerHTML = 'Đăng nhập';
                // You might also display an error message here if login fails
                // const errorMessageDiv = document.getElementById('errorMessage');
                // errorMessageDiv.classList.remove('d-none');
                // errorMessageDiv.innerHTML = 'Tên đăng nhập hoặc mật khẩu không đúng.';
            }, 3000); // Adjust this timeout based on your actual backend response time
        });

        // Add smooth hover effects (already present and good)
        const card = document.querySelector('.login-card');

        card.addEventListener('mouseenter', function () {
            this.style.transform = 'translateY(-5px)';
        });

        card.addEventListener('mouseleave', function () {
            this.style.transform = 'translateY(0)';
        });
    });
</script>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
}